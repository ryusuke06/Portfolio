<div class="container">
  <%= render "admins/tops/header" %>
  <div class="row">
  <h3 class="admins_index">診断編集</h3>
</div>
<!-- request.refererで遷移元から_formのpathを変えれないか検討 -->

<div class="row">
<%= form_with model: @test, url: admins_test_path(@test), local: false do |f| %>
  <div class="row" align="center">
    <div class="col-xs-5">
      <%= attachment_image_tag @test, :image, size: "280x190",format: 'jpeg',fallback: "no_image.jpg"  %>
      <%= f.attachment_field :image, class: "image btn-lg" %>
    </div>
    <table>
      <tr>
        <th><%= f.label :title, "診断名" %></th>
        <td><%= f.text_field :title %></td>
      </tr>
      <tr>
        <th><%= f.label :category, "ジャンル" %></th>
        <td><%= f.collection_select :category_id, @categories, :id, :name, :prompt => "--選択して下さい--"  %></td>
      </tr>
      <tr>
        <th><%= f.label :caption, "診断説明文" %></th>
        <td><%= f.text_area :caption, :size=>"60x5" %></td>
      </tr>
      <tr>
        <th><%= f.label :disclose, "公開ステータス" %></th>
        <th><%= f.select :disclose, {"公開":"disclose", "非公開":"close"} %></th>
      </tr>
    </table>
  </div>

  <h3 class="admins_index">質問(7つまで)</h3>
  <div class="row">
    <div class="col-xs-6" align="center">
      <%= f.fields_for :details do |detail| %>
        <%= render "detail_fields", f: detail %>
      <% end %>
    </div>
    <%= link_to_add_association "追加", f, :details %>
  </div>

  <h3 class="admins_index">診断結果</h3>
  <div class="row">
    <div class="col-xs-6" align="center">
      <%= f.fields_for :results do |result| %>
        <%= render "result_fields", f: result %>
      <% end %>
    </div>
  <%= link_to_add_association "追加", f, :results %>
  </div>
  <%= f.submit "プレビュー" %>
<% end %>
</div>